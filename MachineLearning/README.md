# Machine learning aspects of the project 

- This directory contains scripts for:
  * Building a Random forest model
  * Scoring genomic variants in the patient sample result file using the trained model
- I have commented some lines of the code (such as evaluating model performance, feature importance, etc.) in the `Build_RFModel.py` script.
- You can uncomment them to train, evaluate and obtain a model for your pathology of interest!!!
- In this directory, I have also uploaded a trained model file (RandomForest_Model_MMAF.joblib) for our POI.
- The method can be used to prioritize variants for any monogenic disease.


## Example Usage:

1] Training and saving the Machine learning model 
- The below example is for our POI

```console
python3 Build_RFModel.py --insample Samples.xlsx --incohort MMAF.final.patientIDs.canon.GATK.csv --indir SecondaryAnalyses_220725_HighQuality_AllTranscripts_GATK_ModoptAnais/Samples/
```


2] Scoring genomic variants in the patient sample result file 

```console
python3 ScoreVariants.py --inmodel RandomForest_Model_MMAF.joblib --insample Samples/MMAF.1HXXXT.GATK.csv > ScoredVar_MMAF.1HXXXT.GATK.csv
```

## Arguments

**Arguments [defaults] -> Can be abbreviated to shortest unambiguous prefixes**

```shell
--insamplemeta        Patient Sample metadata file (.xlsx)

--incohort            Single Cohort/Phenotype result file .csv (The cohort for which you would want to train the model)

--indir               Path to the directory containing patient sample result files .csv produced by the grexome-TIMC-Secondary pipeline (https://github.com/manojmw/grexome-TIMC-Secondary)

--inmodel             The trained model file (.joblib) generated by the Build_RFModel.py script

--insampleresult      Sample result file .csv (the cohort should match the trained model cohort, else you might get incorrect predictions!!!) for which you want to score the variants
```

# Dependencies

- Python >= 3
- OpenPyXl == 3.0.10
- Scikit-learn == 1.1.1
- Imbalanced-learn == 0.9.1
- Pandas == 1.4.3
- Joblib == 1.1.0
